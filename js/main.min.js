function shuffle(i){var a,e,t;for(a=i.length-1;a>0;a--)e=Math.floor(Math.random()*(a+1)),t=i[a],i[a]=i[e],i[e]=t;return i}function setInitData(){scrollPos=document.documentElement.scrollTop||document.body.scrollTop||0,winW=$(window).outerWidth(),winH=$(window).outerHeight()}function objectDeepCopy(i){return"object"==typeof i&&null!==i&&JSON.parse(JSON.stringify(i))}var seriesSwiper,procedureSwiper,recommentSwiper,scrollPos=0,winH=0,winW=0,viewSeries=!1,viewProcedure=!1,vm=new Vue({el:"#app",data:{status:{slideMenu:!1,flipGame:!1,psycholGame:!1,form:!1,exchanged:!1,usableSubmit:!1,modalFlip:!1,modalFlipOver:!1,modalPsycholForm:!1,modalMethod:!1,modalPersonalLaw:!1,modalExchange:!1,ajaxLoading:!1,psycholPlayed:!1,recomment:!1},flipGame:{tab:0,reward:{discount:0,coupon:"asdsads"},score:0,count:0,duration:20,reciprocal:0,durationTimer:null,waitflip:500,randomArr:[],checkedArr:[],data:[{cardNum:1,imgUrl:"card_1.png",active:!1},{cardNum:1,imgUrl:"card_1.png",active:!1},{cardNum:2,imgUrl:"card_2.png",active:!1},{cardNum:2,imgUrl:"card_2.png",active:!1},{cardNum:3,imgUrl:"card_3.png",active:!1},{cardNum:3,imgUrl:"card_3.png",active:!1},{cardNum:4,imgUrl:"card_4.png",active:!1},{cardNum:4,imgUrl:"card_4.png",active:!1},{cardNum:5,imgUrl:"card_5.png",active:!1},{cardNum:5,imgUrl:"card_5.png",active:!1},{cardNum:6,imgUrl:"card_6.png",active:!1},{cardNum:6,imgUrl:"card_6.png",active:!1}]}},beforeMount:function(){var i=this.flipGame.data.length;this.flipGame.randomArr=Array.apply(null,{length:i}).map(Function.call,Number),this.resetFlipGame()},methods:{switchStatus:function(i,a){this.status[i]=a},switchMenuSwitch:function(){this.status.slideMenu=!this.status.slideMenu,mobileFullHeight()},setRandomArr:function(){this.flipGame.randomArr=Array.apply(null,{length:12}).map(Function.call,Number),this.flipGame.randomArr=shuffle(this.flipGame.randomArr)},flipCard:function(i){var a=this;vm.status.flipGame&&!this.flipGame.data[i].active&&(this.flipGame.count<2&&(this.flipGame.data[i].active=!0,this.flipGame.checkedArr.push(this.flipGame.data[i]),this.flipGame.count+=1),2==this.flipGame.count&&(this.switchStatus("flipGame",!1),this.flipGame.checkedArr.reduce(function(i,e){if(i.cardNum==e.cardNum)a.flipGame.score+=1,6==a.flipGame.score&&a.endFlipGame(),a.switchStatus("flipGame",!0);else setTimeout(function(){i.active=!1,e.active=!1,a.switchStatus("flipGame",!0)},a.flipGame.waitflip);a.flipGame.checkedArr=[],a.flipGame.count=0})))},flipReciprocal:function(){var i=this;this.flipGame.durationTimer=setInterval(function(){i.flipGame.reciprocal-=1,i.flipGame.reciprocal<10&&(i.flipGame.reciprocal="0"+i.flipGame.reciprocal,i.flipGame.reciprocal=i.flipGame.reciprocal),0==parseInt(i.flipGame.reciprocal)&&i.endFlipGame()},1e3)},getFlipGameReword:function(i){var a=0,e="ETUDMAR30";i<=2?a=30:i>2&&i<=5?(a=50,e="ETUDMAR50"):(a=80,e="ETUDMAR80"),this.flipGame.reward.discount="$"+a,this.flipGame.reward.coupon=e},startFlipGame:function(i){$(i).addClass("off"),this.switchStatus("flipGame",!0),this.setRandomArr(),this.flipReciprocal()},endFlipGame:function(){this.getFlipGameReword(this.flipGame.score),this.sendFlipGameResult()},sendFlipGameResult:function(){this.switchStatus("flipGame",!1),clearInterval(this.flipGame.durationTimer),this.switchStatus("modalFlip",!0)},resetFlipGame:function(){this.flipGame.reciprocal=this.flipGame.duration,this.flipGame.data.forEach(function(i,a){i.active=!1}),this.flipGame.score=0,this.flipGame.reward.discount=0,this.flipGame.reward.coupon="",this.switchStatus("modalFlip",!1),this.switchStatus("flipGame",!1),$(".circle-game").removeClass("off")},objectDeepCopy:function(i){return"object"==typeof i&&null!==i&&JSON.parse(JSON.stringify(i))}}});$(window).on("load",function(){setInitData(),$("body").addClass("loaded"),($(".curtain").length||$(".flip-start .flip").length)&&(vm.flipGame.tab=1)});